{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/vishw/OneDrive/Desktop/reactjs nodejs/client/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/vishw/OneDrive/Desktop/reactjs nodejs/client/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/vishw/OneDrive/Desktop/reactjs nodejs/client/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{NavLink,Route}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Listpost(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),postJSON=_useState2[0],setPostJSON=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),pname=_useState6[0],setPname=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),token=_useState8[0],setToken=_useState8[1];useEffect(function(){setPname(JSON.parse(localStorage.getItem('user-info')));console.log(pname);if(JSON.parse(localStorage.getItem('token'))===''||JSON.parse(localStorage.getItem('token'))===undefined){console.log(\"Token is not there!\");setToken('None');}else{setToken(JSON.parse(localStorage.getItem('token')));}fetchimage();},[]);// console.log(\"token12\", token);\nvar fetchimage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var header;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:header={'Content-Type':'application/json'// ,'Authorization': 'Bearer ' + JSON.parse(localStorage.getItem('token'))\n};_context.next=3;return axios.get('/showfiles/user/'+JSON.parse(localStorage.getItem('user-info')).email,{method:'GET',header:header}).then(function(response){console.log(response.data);setPostJSON(response.data);});case 3:setLoading(true);case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchimage(){return _ref.apply(this,arguments);};}();var deleteImage=function deleteImage(productId){axios.get('/delete/'+productId).then(function(result){alert(\"Delete successfully\");fetchimage();}).catch(function(){alert('Error in the Code');});};return/*#__PURE__*/_jsxs(_Fragment,{children:[loading?postJSON!=''?/*#__PURE__*/_jsx(\"div\",{class:\"table-responsive-lg\",children:/*#__PURE__*/_jsxs(\"table\",{class:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Sr.No\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Image\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"View\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:postJSON.map(function(item,i){return/*#__PURE__*/_jsxs(\"tr\",{className:\"m-auto\",children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:i+1}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"http://127.0.0.1:3001/\"+item.file_name,alt:\"...\",width:\"50\",height:\"50\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NavLink,{to:\"/postview/\"+item.id,className:\"text-decoration-none\",children:item.title})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NavLink,{to:\"/postview/\"+item.id,className:\"text-decoration-none\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-eye\",\"aria-hidden\":\"true\"})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NavLink,{to:\"/postedit/\"+item.id,className:\"text-decoration-none\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-edit\",\"aria-hidden\":\"true\"})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(NavLink,{to:\"#\",onClick:function onClick(){return deleteImage(item.id);},className:\"text-decoration-none\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fa fa-trash\",\"aria-hidden\":\"true\"})})})]},i);})})]})}):/*#__PURE__*/_jsx(\"div\",{class:\"text-center h4 masthead1 container\",children:\"Post Not Found\"}):/*#__PURE__*/_jsx(\"div\",{class:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{class:\"spinner-border m-5\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{class:\"visually-hidden\",children:\"Loading...\"})})}),/*#__PURE__*/_jsx(\"div\",{class:\"p-md-5\"})]});}","map":{"version":3,"sources":["C:/Users/vishw/OneDrive/Desktop/reactjs nodejs/client/client/src/Components/Post/Listpost.js"],"names":["axios","useEffect","useState","NavLink","Route","Listpost","postJSON","setPostJSON","loading","setLoading","pname","setPname","token","setToken","JSON","parse","localStorage","getItem","console","log","undefined","fetchimage","header","get","email","method","then","response","data","deleteImage","productId","result","alert","catch","map","item","i","file_name","id","title"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { NavLink, Route } from \"react-router-dom\";\r\nexport default function Listpost() {\r\n\r\n  const [postJSON, setPostJSON] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [pname, setPname] = useState(\"\");\r\n  const [token, setToken] = useState(\"\");\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    setPname(JSON.parse(localStorage.getItem('user-info')));\r\n    console.log(pname)\r\n    if (JSON.parse(localStorage.getItem('token')) === '' || JSON.parse(localStorage.getItem('token')) === undefined) {\r\n      console.log(\"Token is not there!\");\r\n      setToken('None');\r\n    } else {\r\n      setToken(JSON.parse(localStorage.getItem('token')));\r\n    }\r\n    \r\n    fetchimage()\r\n  }, []);\r\n  // console.log(\"token12\", token);\r\n\r\n\r\n  const fetchimage = async () => {\r\n    \r\n    const header = {\r\n      'Content-Type': 'application/json'\r\n      // ,'Authorization': 'Bearer ' + JSON.parse(localStorage.getItem('token'))\r\n    }\r\n    await axios.get('/showfiles/user/'+JSON.parse(localStorage.getItem('user-info')).email, {method : 'GET',header})\r\n      .then(response => {\r\n        console.log(response.data);\r\n        setPostJSON(response.data);\r\n      })\r\n    setLoading(true);\r\n  }\r\n\r\n  const deleteImage = (productId) => {\r\n    axios.get('/delete/' + productId)\r\n      .then((result) => {\r\n        alert(\"Delete successfully\")\r\n        fetchimage();\r\n      })\r\n      .catch(() => {\r\n        alert('Error in the Code');\r\n      });\r\n  };\r\n\r\n  return (<>\r\n\r\n\r\n    {loading ? (\r\n\r\n      postJSON != '' ?\r\n      <div class=\"table-responsive-lg\">\r\n        <table class=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th scope=\"col\">Sr.No</th>\r\n              <th scope=\"col\">Image</th>\r\n              <th scope=\"col\">Title</th>\r\n              <th scope=\"col\">View</th>\r\n              <th scope=\"col\">Edit</th>\r\n              <th scope=\"col\">Delete</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {\r\n              postJSON.map((item, i) =>\r\n\r\n                <tr key={i} className=\"m-auto\">\r\n                  <th scope=\"row\">{i + 1}</th>\r\n                  <th><img src={\"http://127.0.0.1:3001/\" + item.file_name} alt=\"...\" width=\"50\" height=\"50\" />\r\n                  </th>\r\n                  <td><NavLink to={\"/postview/\" + item.id} className=\"text-decoration-none\">{item.title}</NavLink></td>\r\n                  <td><NavLink to={\"/postview/\" + item.id} className=\"text-decoration-none\"><i class=\"fa fa-eye\" aria-hidden=\"true\"></i></NavLink></td>\r\n                  <td><NavLink to={\"/postedit/\" + item.id} className=\"text-decoration-none\"><i class=\"fa fa-edit\" aria-hidden=\"true\"></i></NavLink></td>\r\n                  <td><NavLink to=\"#\" onClick={() => deleteImage(item.id)} className=\"text-decoration-none\" ><i class=\"fa fa-trash\" aria-hidden=\"true\"></i></NavLink></td>\r\n                </tr>\r\n              )\r\n            }\r\n\r\n          </tbody>\r\n\r\n        </table>\r\n        </div>\r\n\r\n        : (<div class=\"text-center h4 masthead1 container\">Post Not Found</div>)\r\n    ) : (\r\n\r\n      <div class=\"d-flex justify-content-center\">\r\n        <div class=\"spinner-border m-5\" role=\"status\">\r\n          <span class=\"visually-hidden\">Loading...</span>\r\n        </div>\r\n      </div>\r\n    )}\r\n    <div class=\"p-md-5\"></div>\r\n\r\n\r\n  </>);\r\n}"]},"metadata":{},"sourceType":"module"}