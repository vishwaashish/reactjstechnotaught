{"ast":null,"code":"import _slicedToArray from\"C:/Users/vishw/OneDrive/Desktop/reactjs nodejs/client/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import{Tabs,Tab}from'react-bootstrap';import Parser from'html-react-parser';import axios from'axios';import{useHistory}from'react-router';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Updateprofile(){// const [fetchemail,setfetchemail]= useState('');\n// const [fetchname,setfetchname]= useState('');\nvar history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newpassword=_useState6[0],setNewpassword=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),oldpassword=_useState8[0],setOldpassword=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),confirmpassword=_useState10[0],setComfirmpassword=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),error=_useState12[0],setError=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),errorname=_useState14[0],setErrorname=_useState14[1];useEffect(function(){setName(JSON.parse(localStorage.getItem('user-info')).name);setEmail(JSON.parse(localStorage.getItem('user-info')).email);},[]);var onsubmitname=function onsubmitname(e){e.preventDefault();if(name==''){setErrorname(\"<div class=\\\"invalid-feedback\\\">\\n            Filled is Empty.\\n        </div>\");}else{axios.post('users/updateusername',{\"name\":name,\"email\":email}).then(function(res){console.log(res);setErrorname(\"<div class=\\\"valid-feedback\\\">\\n                Updated Successfully.\\n            </div>\");}).catch(function(err){return console.log(err);});}};var onsubmitpassword=function onsubmitpassword(e){e.preventDefault();console.log(oldpassword.length,newpassword.length,confirmpassword.length);// console.log(erroroldpass,errornewpass,errorconpass)\nif(oldpassword==''||newpassword==''||confirmpassword==''){setError([400,\"text-danger\",\"Filled is Empty.\"]);}else if(oldpassword.length<6||newpassword.length<6||confirmpassword.length<6){setError([400,\"text-danger\",\"Value should be Greater than 6!\"]);}else if(newpassword!=confirmpassword){setError([400,\"text-danger\",\"New password and Confirm password is incorrect.\"]);}else{axios.post('users/updatepassword',{\"password\":oldpassword,\"email\":email,\"newpassword\":newpassword}).then(function(res){console.log(res.data.status);if(res.data.status===401){setError([400,\"text-danger\",\"New password and Old password is incorrect.\"]);}if(res.data.status===200){setError([200,\"text-success\",\"Updated Successfully..  Redirecting to Login ....\"]);setTimeout(function(){localStorage.removeItem('user-info');history.push(\"/login\");},3000);}}).catch(function(err){return console.log(err);});}};console.log(error);// console.log(JSON.parse(localStorage.getItem('user-info')).name, \"name\")\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{class:\"masthead1 container\",children:/*#__PURE__*/_jsx(\"div\",{class:\"row gx-md-5 align-items-center justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{class:\"col-md-6 col-11 card0 p-md-5 p-3\",children:/*#__PURE__*/_jsxs(Tabs,{defaultActiveKey:\"name\",className:\"mb-3 justify-content-center\",children:[/*#__PURE__*/_jsx(Tab,{eventKey:\"name\",title:\"Edit Name\",children:/*#__PURE__*/_jsxs(\"form\",{class:\"was-validated\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"validationServer03\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",class:\"form-control is-valid\",id:\"validationServer03\",defaultValue:name,onChange:function onChange(e){setName(e.target.value);},placeholder:\"Enter Name...\",required:true}),errorname!==null?Parser(errorname):null,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Update\",onClick:function onClick(e){return onsubmitname(e);}})]})}),/*#__PURE__*/_jsx(Tab,{eventKey:\"password\",title:\"Edit Password\",children:/*#__PURE__*/_jsxs(\"form\",{class:\"was-validated\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"validationServer02\",children:\"Old Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",class:\"form-control is-valid\",id:\"validationServer02\",placeholder:\"Enter Password...\",onChange:function onChange(e){setOldpassword(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"label\",{for:\"validationServer04\",children:\"New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",class:\"form-control is-valid\",id:\"validationServer04\",placeholder:\"Enter Password...\",onChange:function onChange(e){setNewpassword(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"label\",{for:\"validationServer05\",children:\"Confirm New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",class:\"form-control is-valid\",id:\"validationServer05\",placeholder:\"Enter Password...\",onChange:function onChange(e){setComfirmpassword(e.target.value);},required:true}),error[0]===400||error[0]===401||error[0]===200?/*#__PURE__*/_jsx(\"div\",{class:error[1],children:error[2]}):null,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Update\",onClick:function onClick(e){return onsubmitpassword(e);}})]})})]})})})})});}","map":{"version":3,"sources":["C:/Users/vishw/OneDrive/Desktop/reactjs nodejs/client/client/src/Components/User/Updateprofile.js"],"names":["useState","useEffect","Tabs","Tab","Parser","axios","useHistory","Updateprofile","history","name","setName","email","setEmail","newpassword","setNewpassword","oldpassword","setOldpassword","confirmpassword","setComfirmpassword","error","setError","errorname","setErrorname","JSON","parse","localStorage","getItem","onsubmitname","e","preventDefault","post","then","res","console","log","catch","err","onsubmitpassword","length","data","status","setTimeout","removeItem","push","target","value"],"mappings":"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","sourcesContent":["\r\nimport { useState, useEffect } from 'react';\r\nimport { Tabs, Tab } from 'react-bootstrap';\r\nimport Parser from 'html-react-parser';\r\nimport axios from 'axios';\r\nimport { useHistory } from 'react-router';\r\n\r\nexport default function Updateprofile() {\r\n    // const [fetchemail,setfetchemail]= useState('');\r\n    // const [fetchname,setfetchname]= useState('');\r\n    const history = useHistory();\r\n    const [name, setName] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [newpassword, setNewpassword] = useState(\"\");\r\n    const [oldpassword, setOldpassword] = useState(\"\");\r\n    const [confirmpassword, setComfirmpassword] = useState(\"\");\r\n\r\n    const [error, setError] = useState([]);\r\n\r\n    const [errorname, setErrorname] = useState(\"\");\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        setName(JSON.parse(localStorage.getItem('user-info')).name)\r\n        setEmail(JSON.parse(localStorage.getItem('user-info')).email)\r\n    }, [])\r\n\r\n\r\n\r\n\r\n\r\n    const onsubmitname = (e) => {\r\n        e.preventDefault()\r\n        if (name == '') {\r\n            setErrorname(`<div class=\"invalid-feedback\">\r\n            Filled is Empty.\r\n        </div>`)\r\n        } else {\r\n            axios.post('users/updateusername', {\r\n                \"name\": name,\r\n                \"email\": email\r\n            }).then((res) => {\r\n                console.log(res);\r\n                setErrorname(`<div class=\"valid-feedback\">\r\n                Updated Successfully.\r\n            </div>`)\r\n            }).catch((err) => console.log(err))\r\n        }\r\n\r\n    }\r\n    const onsubmitpassword = (e) => {\r\n        e.preventDefault()\r\n        console.log(oldpassword.length, newpassword.length, confirmpassword.length)\r\n        // console.log(erroroldpass,errornewpass,errorconpass)\r\n        if (oldpassword == '' || newpassword == '' || confirmpassword == '') {\r\n\r\n            setError([400, \"text-danger\", \"Filled is Empty.\"]);\r\n        } else if (oldpassword.length < 6 || newpassword.length < 6 || confirmpassword.length < 6) {\r\n            setError([400, \"text-danger\", \"Value should be Greater than 6!\"]);\r\n        } else if (newpassword != confirmpassword) {\r\n            setError([400, \"text-danger\", \"New password and Confirm password is incorrect.\"]);\r\n        }\r\n        else {\r\n            axios.post('users/updatepassword', {\r\n                \"password\": oldpassword,\r\n                \"email\": email,\r\n                \"newpassword\": newpassword\r\n            }).then((res) => {\r\n                console.log(res.data.status);\r\n                if (res.data.status === 401) {\r\n                    setError([400, \"text-danger\", \"New password and Old password is incorrect.\"]);\r\n                }\r\n                if (res.data.status === 200) {\r\n                    \r\n                    setError([200, \"text-success\", \"Updated Successfully..  Redirecting to Login ....\"]);\r\n                    setTimeout(()=>{\r\n                        localStorage.removeItem('user-info');\r\n                        history.push(\"/login\")\r\n                    },3000)\r\n                }\r\n            }).catch((err) => console.log(err))\r\n        }\r\n\r\n    }\r\n    console.log(error)\r\n    // console.log(JSON.parse(localStorage.getItem('user-info')).name, \"name\")\r\n    return (<>\r\n\r\n        <div class=\"masthead1 container\">\r\n            <div class=\"row gx-md-5 align-items-center justify-content-center\">\r\n                <div class=\"col-md-6 col-11 card0 p-md-5 p-3\">\r\n                    <Tabs defaultActiveKey=\"name\" className=\"mb-3 justify-content-center\">\r\n                        <Tab eventKey=\"name\" title=\"Edit Name\">\r\n                            <form class=\"was-validated\" >\r\n                                <label for=\"validationServer03\">Name</label>\r\n                                <input type=\"text\" class=\"form-control is-valid\" id=\"validationServer03\" defaultValue={name} onChange={(e) => { setName(e.target.value) }} placeholder=\"Enter Name...\" required />\r\n                                {errorname !== null ? Parser(errorname) : null}\r\n                                <br />\r\n                                <input type=\"submit\" value=\"Update\" onClick={(e) => onsubmitname(e)} />\r\n                            </form>\r\n                        </Tab>\r\n                        <Tab eventKey=\"password\" title=\"Edit Password\">\r\n                            <form class=\"was-validated\" >\r\n                                <label for=\"validationServer02\">Old Password</label>\r\n                                <input type=\"password\" class=\"form-control is-valid\" id=\"validationServer02\" placeholder=\"Enter Password...\" onChange={(e) => { setOldpassword(e.target.value) }} required />\r\n                                <label for=\"validationServer04\">New Password</label>\r\n                                <input type=\"password\" class=\"form-control is-valid\" id=\"validationServer04\" placeholder=\"Enter Password...\" onChange={(e) => { setNewpassword(e.target.value) }} required />\r\n                                <label for=\"validationServer05\">Confirm New Password</label>\r\n                                <input type=\"password\" class=\"form-control is-valid\" id=\"validationServer05\" placeholder=\"Enter Password...\" onChange={(e) => { setComfirmpassword(e.target.value) }} required />\r\n\r\n                                {error[0] === 400 || error[0] === 401 || error[0] === 200 ? (\r\n                                    <div class={error[1]}>\r\n                                        {error[2]}\r\n                                    </div>) :  null}\r\n                                <br />\r\n                                <input type=\"submit\" value=\"Update\" onClick={(e) => onsubmitpassword(e)} />\r\n\r\n                            </form>\r\n                        </Tab>\r\n                    </Tabs>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </>);\r\n}"]},"metadata":{},"sourceType":"module"}